---
title: "Untitled"
output: html_document
---
## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:
```{r, include = FALSE}
libs <- c("dplyr", "tidyr", "data.table", "ggplot2", "caret", "caTools")
lapply(libs, require, character.only = T)
```
# Loading Data
```{r cars}
data <- fread("data/loan_data.csv")
data <- data %>%
        mutate(not.fully.paid = factor(ifelse(not.fully.paid == 1, "Yes", "No")),
               credit.policy = factor(ifelse(credit.policy == 1, "Yes", "No")),
               annual.inc = exp(log.annual.inc),
               days_debt = round(data$days.with.cr.line))

```

| Variable  | class     | description                    |
|:----------|:----------|:-------------------------------|
| credit_policy   | numeric | 1 if the customer meets the credit underwriting criteria; 0 otherwise. |
| purpose      | character | The purpose of the loan. |
| int_rate      | numeric   | The interest rate of the loan (more risky borrowers are assigned higher interest rates).  |
| installment  | numeric   | The monthly installments owed by the borrower if the loan is funded. |
| log_annual_inc | numeric   | The natural log of the self-reported annual income of the borrower. |
| dti | numeric   | The debt-to-income ratio of the borrower (amount of debt divided by annual income). |
| fico | numeric   | The FICO credit score of the borrower. |
| days_with_cr_line | numeric   | The number of days the borrower has had a credit line. |
| revol_bal | numeric   | The borrower's revolving balance (amount unpaid at the end of the credit card billing cycle). |
| revol_util | numeric   | The borrower's revolving line utilization rate (the amount of the credit line used relative to total credit available). |
| inq_last_6mths | numeric   | The borrower's number of inquiries by creditors in the last 6 months. |
| delinq_2yrs | numeric   | The number of times the borrower had been 30+ days past due on a payment in the past 2 years. |
| pub_rec | numeric   | The borrower's number of derogatory public records.
| not_fully_paid | numeric   | 1 if the loan is not fully paid; 0 otherwise.

# Exploratory Data Analysis
## Exploring Possible response variables
### Examining fully paid 
```{r}
data %>%
ggplot(aes(x = factor(not.fully.paid), fill = not.fully.paid)) +
  geom_bar() +
  labs(x = "Default", y = "Count", title = "Number of Clients who did and did not Default") +
  theme_minimal() +
  theme(legend.position = "none")

fully_paid_prop <- data %>%
  summarize(prop = mean(not.fully.paid == "No")) %>%
  pull()

Counts <- data %>%
  count(not.fully.paid) 
```
  When looking at the number of people who defaulted (did not completely pay off the loan) on their loan, there is a significant difference between the number of individuals who have paid off their loans completely vs those who defaulted on it. With `r round(fully_paid_prop*100, 2)`% 

